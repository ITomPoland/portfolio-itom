// NavigationUI Styles - Raw Version (Placeholder Graphics)
// Awwwards 2026 Ready - Zero UI Approach

.navigation-ui {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 100;

    // All interactive elements need pointer-events
    button,
    .map-panel,
    .menu-overlay {
        pointer-events: auto;
    }
}

// === BUTTONS BASE STYLE ===
.nav-btn {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 55px;
    padding-top: 8px; // Push content down since top is hidden
    background: transparent;
    border: none;
    cursor: url('/cursors/cursor-pointer.webp'), pointer;
    transition: transform 0.2s ease;
    overflow: visible;

    // Paper texture background
    &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url('/textures/paper-texture.webp') center center;
        background-size: cover;
        z-index: -1;
        // Torn edges clip-path on the background only
        clip-path: polygon(0% 0%, 100% 0%,
                100% 0%, 98% 10%, 100% 20%, 97% 35%, 100% 50%, 98% 65%, 100% 80%, 97% 90%,
                100% 100%, 90% 97%, 80% 100%, 70% 96%, 60% 100%, 50% 97%, 40% 100%, 30% 96%, 20% 100%, 10% 97%, 0% 100%,
                0% 100%, 2% 90%, 0% 80%, 3% 65%, 0% 50%, 2% 35%, 0% 20%, 3% 10%, 0% 0%);
    }

    // SVG border line - torn edges
    &::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 55' preserveAspectRatio='none'%3E%3Cpath d='M0 0 L50 0 L49 5.5 L50 11 L48.5 19 L50 27.5 L49 36 L50 44 L48.5 49.5 L50 55 L45 54 L40 55 L35 53 L30 55 L25 54 L20 55 L15 53 L10 55 L5 54 L0 55 L1 49.5 L0 44 L1.5 36 L0 27.5 L1 19 L0 11 L1.5 5.5 L0 0 Z' fill='none' stroke='%231a1a1a' stroke-width='1.5'/%3E%3C/svg%3E");
        background-size: 100% 100%;
    }

    // Soft shadow
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);

    &:hover {
        transform: translateY(-2px);
    }

    &:active {
        transform: translateY(1px);
    }

    svg {
        width: 22px;
        height: 22px;
        fill: none;
        stroke: #1a1a1a;
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
        z-index: 1;
    }
}

// === BACK BUTTON ===
.back-btn {
    position: fixed;
    top: 0; // Starts from top edge
    left: 24px;
    animation: fadeSlideDown 0.3s ease-out;
    transition: transform 0.3s ease, opacity 0.3s ease;

    // Slide up when exiting
    &.exiting {
        transform: translateY(-100%);
        opacity: 0;
        pointer-events: none;
    }

    @keyframes fadeSlideDown {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
}

// === RIGHT SIDE CONTROLS ===
.nav-controls {
    position: fixed;
    top: 0; // Starts from top edge
    right: 24px;
    display: flex;
    gap: 12px;
    transition: transform 0.3s ease, opacity 0.3s ease;
    animation: slideDownEntrance 0.4s ease-out;

    @keyframes slideDownEntrance {
        from {
            opacity: 0;
            transform: translateY(-100%);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    // Slide up when menu is open
    &.menu-open {
        transform: translateY(-100%);
        opacity: 0;
        pointer-events: none;
    }
}

// === HAMBURGER BUTTON ===
.hamburger-btn {
    .hamburger-icon {
        display: flex;
        flex-direction: column;
        gap: 5px;
        width: 20px;

        span {
            display: block;
            height: 2px;
            width: 100%;
            background: #1a1a1a;
            border-radius: 2px;
        }
    }
}

// === MAP PANEL ===
.map-panel {
    position: fixed;
    top: 0;
    left: 50%;
    transform: translateX(-50%) translateY(-100%);
    width: 90%;
    max-width: 500px;
    // Soft shadow
    border: none;
    border-radius: 0;
    // Box shadow works on the container now (if we want rectangular shadow)
    // or we can remove it if we want pure paper look.
    // Keeping it subtle or removing it to avoid rectangle ghost.
    filter: drop-shadow(0 4px 20px rgba(0, 0, 0, 0.15));

    // Hidden by default - slides up
    opacity: 0;
    visibility: hidden;
    transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1),
        opacity 0.3s ease,
        visibility 0.3s;

    &.open {
        opacity: 1;
        visibility: visible;
        transform: translateX(-50%) translateY(0);
    }

    // NEW: Inner wrapper that handles the torn paper shape and content
    .map-content-clipped {
        position: relative;
        width: 100%;
        height: 100%;
        padding: 20px;
        padding-bottom: 30px; // Extra space for bottom torn edge
        background: #ffffff;

        // Paper texture background (rotated 90deg since texture is horizontal)
        &::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url('/textures/paper-texture.webp') center center;
            background-size: cover;
            transform: rotate(90deg);
            z-index: -1;
            pointer-events: none;
        }

        // Torn paper edges using clip-path
        clip-path: polygon( // Top edge - straight
            0% 0%, 100% 0%,
            // Right edge - torn
            100% 0%, 99% 3%, 100% 6%, 98% 10%, 100% 14%, 99% 18%, 100% 22%, 98% 26%,
            100% 30%, 99% 35%, 100% 40%, 98% 45%, 100% 50%, 99% 55%, 100% 60%,
            98% 65%, 100% 70%, 99% 75%, 100% 80%, 98% 85%, 100% 90%, 99% 95%,
            // Bottom edge - torn (going left)
            100% 100%, 96% 99%, 92% 100%, 88% 98%, 84% 100%, 80% 99%, 76% 100%,
            72% 98%, 68% 100%, 64% 99%, 60% 100%, 56% 98%, 52% 100%, 48% 99%,
            44% 100%, 40% 98%, 36% 100%, 32% 99%, 28% 100%, 24% 98%, 20% 100%,
            16% 99%, 12% 100%, 8% 98%, 4% 100%, 0% 99%,
            // Left edge - torn (going up)
            0.5% 99.5%, 1% 95%, 0% 90%, 2% 85%, 0% 80%, 1% 75%, 0% 70%, 2% 65%,
            0% 60%, 1% 55%, 0% 50%, 2% 45%, 0% 40%, 1% 35%, 0% 30%, 2% 26%,
            0% 22%, 1% 18%, 0% 14%, 2% 10%, 0% 6%, 1% 3%, 0% 0%);
    }

    .map-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 2px dashed #ccc;

        h3 {
            margin: 0;
            font-size: 16px;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #1a1a1a;
            font-family: 'Patrick Hand', cursive, sans-serif;
        }

        .close-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: transparent;
            border: none;
            cursor: url('/cursors/cursor-pointer.webp'), pointer;
            transition: transform 0.2s ease, opacity 0.2s ease;
            opacity: 0.6;

            svg {
                width: 18px;
                height: 18px;
                fill: none;
                stroke: #1a1a1a;
                stroke-width: 2.5;
                stroke-linecap: round;
            }

            &:hover {
                opacity: 1;
                transform: scale(1.1);
            }

            &:active {
                transform: scale(0.95);
            }
        }
    }

    .map-container {
        position: relative;
        width: 100%;
        border-radius: 8px;
        overflow: hidden;
    }

    // Map background image
    .map-image {
        display: block;
        width: 100%;
        height: auto;
        pointer-events: none;
    }

    // Pin slot markers (the square placeholders)
    .pin-slot {
        position: absolute;
        transform: translate(-50%, -50%);
        width: 35px;
        height: 35px;
        padding: 0;
        background: none;
        border: none;
        cursor: url('/cursors/cursor-pointer.webp'), pointer;
        transition: transform 0.2s ease;
        z-index: 2;

        .slot-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        &:hover {
            transform: translate(-50%, -50%) scale(1.15);
        }

        &.active {
            // When this room is active, the slot glows
            filter: drop-shadow(0 0 4px rgba(200, 50, 50, 0.5));
        }
    }

    // The movable pin marker
    .pin-marker {
        position: absolute;
        transform: translate(-50%, -90%); // Pin points at the tip
        width: 20px;
        height: auto;
        z-index: 3;
        pointer-events: none;
        transition: left 0.4s ease, top 0.4s ease;

        .pin-image {
            width: 100%;
            height: auto;
            filter: drop-shadow(2px 2px 2px rgba(0, 0, 0, 0.3));
        }
    }
}

// === MENU OVERLAY ===
.menu-overlay {
    position: fixed;
    inset: 0;
    background: transparent;
    z-index: -1;
}

// === SHARED HINT ANIMATION ===
@keyframes hintFadeIn {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

// === ENTRANCE HINT - Before entering (same style as corridor hint) ===
.entrance-hint {
    position: fixed;
    bottom: 32px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 24px;
    padding: 16px 24px;
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid #1a1a1a;
    border-radius: 12px;
    box-shadow: 3px 3px 0 #1a1a1a;
    font-size: 14px;
    color: #1a1a1a;
    pointer-events: auto;
    animation: hintFadeIn 0.5s ease-out;

    span {
        display: flex;
        align-items: center;
        gap: 8px;
    }
}

// === CORRIDOR HINT - After entering ===
.corridor-hint {
    position: fixed;
    bottom: 32px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 24px;
    padding: 16px 24px;
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid #1a1a1a;
    border-radius: 12px;
    box-shadow: 3px 3px 0 #1a1a1a;
    font-size: 14px;
    color: #1a1a1a;
    pointer-events: auto;
    animation: corridorHintFadeIn 0.5s ease-out, corridorHintFadeOut 0.5s ease-out 3.5s forwards;

    span {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    @keyframes corridorHintFadeIn {
        from {
            opacity: 0;
            transform: translateX(-50%) translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
    }

    @keyframes corridorHintFadeOut {
        to {
            opacity: 0;
            transform: translateX(-50%) translateY(10px);
        }
    }
}

// === RESPONSIVE ===
@media (max-width: 768px) {
    .nav-btn {
        width: 45px;
        height: 50px;
    }

    .back-btn {
        left: 16px;
    }

    .nav-controls {
        right: 16px;
        gap: 8px;
    }

    .map-panel {
        width: 95%;
        max-width: none;
        padding: 16px;

        .map-header h3 {
            font-size: 14px;
        }

        .close-btn {
            width: 28px;
            height: 28px;
        }
    }

    .entrance-hint {
        gap: 8px;
        bottom: 24px;
        padding: 12px 20px;
        font-size: 13px;
    }

    .corridor-hint {
        gap: 8px;
        bottom: 24px;
        padding: 12px 20px;
        font-size: 13px;
    }
}

@media (max-width: 480px) {
    .map-panel {
        width: 100%;
        border-radius: 0 0 16px 16px;
        padding: 12px;
    }
}